# Synapse Docker

Quickly spin up a Synapse + Postgres in Docker for testing.

**DO NOT USE IN PRODUCTION**

The config generated by this script is intentionally insecure to make testing easier.

## Setup

Copy `config.example.env` to `config.env` and edit as needed.

Install [yq](https://mikefarah.gitbook.io/yq/), docker, and docker-compose if you don't have them.

```bash
$ ./synapse-env-manager.sh
Usage: /path/to/synapse-env-manager.sh <option>

Options:
    admin: Create Synapse admin account (username: admin. password: admin)
    delete: Delete the environment
    setup: Create, edit, (re)start the environment
    stop: Stop the environment without deleting it
```

The directories `postgres` and `synapse` and the files `docker-compose.yaml` and `elementConfig.json` will be created in
the directory where the `synapse-env-manager.sh` script is placed. If these already exists, you may loose data stored
in them.

It will take a minute after you create the database for Synapse to start properly as it restarts a few times while
Postgres initializes the database.

Use Element Web on <http://localhost:10000> or any Matrix client to access Synapse on homeserver URL
`http://localhost:8448`.

## Adminer

You can optionally set up [Adminer](https://www.adminer.org/) to manage Postgres from your browser. If you enabled this,
the Adminer web ui is accessible at <http://localhost:10001/>. System: `PostgreSQL`. Server: `postgres`.
Username/Database: `synapse`. Password: `password`.
